{% macro datatable(path=null,columns=null,show =null,edit=null,remove=null) %}
    <script type="text/javascript" src="{{ asset('bundles/benmachatemplate/js/lib/moment/moment-with-locales.min.js') }}"></script>
    <script src="{{ asset('bundles/benmachatemplate/js/lib/datatables-net/datatables.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/benmachatemplate/js/lib/datatables-net/responsive-2.1.0/js/dataTables.responsive.js') }}" type="text/javascript"></script>
    {% set columns = DatatableRaw(columns,show,edit,remove) %}
    <script>
        $(document).ready(function () {
            var table = $('#datatable').DataTable({
                "dom": 'Bfrtip',
                "buttons": [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ],
                "ajax": {
                    url: "{{ path(path) }}",
                    data: {
                        /*join:[{
                            "join": "VoitureBundle:Voiture",
                            "alias": 'v',
                            "condition": "t.voiture = v.id"
                        },{
                            "join": "ConfigurationBundle:EntretientType",
                            "alias": 'e',
                            "condition": "t.entretienstype = e.id"
                        }],
                        hiddenColumn:[{
                            name:'e.action',
                            data:'e_action'
                        },{
                            name:'v.matricule',
                            data:'v_matricule'
                        },{
                            name:'v.serie',
                            data:'v_serie'
                        }]*/
                    }
                },
                "processing": true,
                "serverSide": true,
                "sAjaxDataProp": "data",
                "pageLength": 100,
                "deferRender": true,
                "scrollY": 500,
                "scrollX": true,
                "scroller": {
                    "loadingIndicator": true
                },
                "columns": [{% for column in columns %}{ {% for key, data in column %}{% if key == "render" %}"{{ key }}": {{ data|raw }},{% else %}"{{ key }}":"{{ data|raw }}",{% endif %}{% endfor %}},{% endfor %}]
            });

            setTimeout(function () {
                table.draw();
            }, 50);

        });
    </script>
{% endmacro %}

{% macro flatpicker() %}
    <script type="text/javascript" src="{{ asset('bundles/benmachatemplate/js/lib/flatpickr/flatpickr.min.js') }}"></script>
    <script>
        /* ==========================================================================
          Datepicker
          ========================================================================== */

        $(document).ready(function () {
            $('.flatpickr').flatpickr();
            $("#flatpickr-disable-range").flatpickr({
                disable: [
                    {
                        from: "2016-08-16",
                        to: "2016-08-19"
                    },
                    "2016-08-24",
                    new Date().fp_incr(30) // 30 days from now
                ]
            });
        });
    </script>
{% endmacro %}